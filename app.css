/* =========================================================
   FOLLOW‑UP CRM — LUXE “FROST / LIQUID GLASS” UPGRADE LAYER
   - All existing selectors preserved; behavior unchanged
   - Frosted glass surfaces, liquid gradient blobs
   - High‑end hover, press, and entrance animations
   - Motion‑aware (prefers-reduced-motion respected)
   ========================================================= */

/* -------------------- Design Tokens (Enhancements) -------------------- */
:root{
  --glass-bg: color-mix(in oklab, var(--panel) 72%, transparent);
  --glass-surface: color-mix(in oklab, var(--surface) 70%, transparent);
  --glass-chip: color-mix(in oklab, var(--chip) 62%, transparent);

  --glass-border-dark: rgba(255,255,255,.08);
  --glass-border-light: rgba(0,0,0,.06);

  --ring-strong: color-mix(in oklab, var(--accent) 48%, white 12%);

  --blur-1: 8px;
  --blur-2: 14px;
  --blur-3: 22px;

  --elev-1: 0 6px 22px rgba(0,0,0,.18), 0 2px 6px rgba(0,0,0,.18) inset, 0 0 0 1px rgba(255,255,255,.03) inset;
  --elev-2: 0 16px 38px rgba(0,0,0,.28), 0 0 0 1px rgba(255,255,255,.04) inset;
  --elev-3: 0 28px 80px rgba(0,0,0,.42);
}

/* Subtle procedural noise (prevents banding over blur) */
@supports (background: paint(worklet)) {
  /* Optional Houdini worklet could go here if used; leaving tokenized hook */
}

/* -------------------- Animated Liquid Background -------------------- */
body::before,
body::after{
  content:"";
  position:fixed; inset:auto; z-index:-1;
  width:48vw; height:48vw; max-width:820px; max-height:820px;
  filter: blur(60px) saturate(120%);
  opacity:.42; pointer-events:none;
  background:
    radial-gradient(35% 40% at 40% 50%, color-mix(in oklab, var(--accent) 76%, white 8%) 0%, transparent 62%),
    radial-gradient(40% 45% at 70% 60%, color-mix(in oklab, var(--accent-2) 70%, white 8%) 0%, transparent 65%),
    radial-gradient(28% 35% at 50% 40%, rgba(255,255,255,.12) 0%, transparent 60%);
  transition: opacity .4s ease;
}
body::before{ top:-8vw; right:-10vw; animation:blobFloat 36s ease-in-out infinite; }
body::after { bottom:-10vw; left:-12vw; animation:blobFloat2 44s ease-in-out infinite; opacity:.33; }

@keyframes blobFloat{
  0%{ transform: translate3d(0,0,0) rotate(0deg) scale(1); }
  25%{ transform: translate3d(-2vw,1.5vw,0) rotate(10deg) scale(1.06); }
  50%{ transform: translate3d(0,2vw,0) rotate(0deg) scale(1.03); }
  75%{ transform: translate3d(2vw,-1.2vw,0) rotate(-8deg) scale(1.08); }
  100%{ transform: translate3d(0,0,0) rotate(0deg) scale(1); }
}
@keyframes blobFloat2{
  0%{ transform: translate3d(0,0,0) rotate(0deg) scale(1); }
  20%{ transform: translate3d(2vw,-1vw,0) rotate(-8deg) scale(1.05); }
  55%{ transform: translate3d(-1vw,2vw,0) rotate(6deg) scale(1.09); }
  100%{ transform: translate3d(0,0,0) rotate(0deg) scale(1); }
}

/* Respect users who prefer less motion */
@media (prefers-reduced-motion: reduce){
  body::before, body::after{ animation:none; opacity:.22; }
}

/* -------------------- Frosted Header -------------------- */
header{
  backdrop-filter: blur(var(--blur-2)) saturate(120%);
  -webkit-backdrop-filter: blur(var(--blur-2)) saturate(120%);
  border-bottom:1px solid var(--glass-border-dark);
  box-shadow: 0 8px 26px rgba(0,0,0,.22);
}

/* -------------------- Frosted Cards & Surfaces -------------------- */
.card{
  background:
    linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.00)),
    var(--glass-bg);
  border: 1px solid var(--glass-border-dark);
  box-shadow: var(--elev-2);
  backdrop-filter: blur(var(--blur-2)) saturate(120%);
  -webkit-backdrop-filter: blur(var(--blur-2)) saturate(120%);
  transform: translateZ(0); /* promote to its own layer for smoother anims */
  transition: box-shadow .25s ease, transform .25s ease, border-color .25s ease, background .25s ease;
}
.card:hover{
  box-shadow: 0 24px 54px rgba(0,0,0,.36);
  transform: translateY(-1px);
  border-color: color-mix(in oklab, var(--accent) 18%, var(--glass-border-dark));
}
.card .hd{
  background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,0));
  border-bottom: 1px solid var(--glass-border-dark);
  backdrop-filter: blur(var(--blur-1));
}

/* Light theme edge refinement */
body.light .card{
  border-color: var(--glass-border-light);
  background:
    linear-gradient(180deg, rgba(0,0,0,.02), rgba(0,0,0,0)),
    var(--panel);
}

/* -------------------- Buttons: Glass, Lift, Shimmer -------------------- */
button{
  position:relative;
  transition: transform .12s cubic-bezier(.2,.8,.2,1), box-shadow .18s ease, filter .18s ease;
  box-shadow: 0 6px 14px rgba(0,0,0,.18);
}
button::after{
  content:"";
  position:absolute; inset:0;
  border-radius:inherit;
  background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,0));
  opacity:.35; pointer-events:none;
  transition: opacity .2s ease;
}
button:hover::after{ opacity:.5; }
button:active{ transform: translateY(1px) scale(.997); }

button.primary{
  box-shadow:
    0 14px 30px color-mix(in oklab, var(--accent) 30%, black 40%),
    0 0 0 1px rgba(255,255,255,.06) inset;
  background:
    radial-gradient(60% 120% at 50% 0%, rgba(255,255,255,.18), transparent 60%),
    linear-gradient(180deg, color-mix(in oklab, var(--accent) 94%, white 6%), #5f4af0);
  border:1px solid color-mix(in oklab, var(--accent) 70%, black 15%);
}
button.primary:hover{
  filter:brightness(1.05);
  box-shadow:
    0 18px 44px color-mix(in oklab, var(--accent) 40%, black 45%),
    0 0 0 1px rgba(255,255,255,.08) inset;
}
.add-btn{
  transition: transform .16s cubic-bezier(.2,1,.2,1), box-shadow .18s ease;
}
.add-btn:hover{ transform: translateY(-2px) scale(1.03); }

/* Danger button with glass edge */
.btn-danger{
  background:
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0)),
    linear-gradient(180deg, rgba(220,80,80,.16), rgba(220,80,80,.08)) !important;
  backdrop-filter: blur(6px) saturate(120%);
  -webkit-backdrop-filter: blur(6px) saturate(120%);
  border-color: color-mix(in oklab, var(--danger) 60%, black 12%) !important;
}

/* Icon buttons with micro‑lift */
.btn-icon{
  background: var(--glass-chip);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-color: var(--glass-border-dark);
  transition: transform .14s ease, box-shadow .2s ease, background .2s ease;
}
.btn-icon:hover{ transform: translateY(-1px); box-shadow: 0 10px 20px rgba(0,0,0,.25); }

/* -------------------- Inputs & Focus -------------------- */
input, select, textarea{
  background:
    linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,0)),
    var(--glass-surface);
  border:1px solid var(--glass-border-dark);
  backdrop-filter: blur(var(--blur-1));
  -webkit-backdrop-filter: blur(var(--blur-1));
  transition: border-color .18s ease, box-shadow .18s ease, background .18s ease;
}
input:focus, select:focus, textarea:focus{
  border-color: color-mix(in oklab, var(--accent) 40%, white 0%);
  box-shadow:
    0 0 0 3px color-mix(in oklab, var(--accent) 30%, transparent 70%),
    0 10px 22px rgba(0,0,0,.20);
}

/* -------------------- Segmented Control: Glass Tabs -------------------- */
.seg{
  background: color-mix(in oklab, var(--chip) 60%, transparent);
  backdrop-filter: blur(10px) saturate(120%);
  -webkit-backdrop-filter: blur(10px) saturate(120%);
  border: 1px solid var(--glass-border-dark);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.02), 0 8px 20px rgba(0,0,0,.18);
}
.seg > button.primary{
  background:
    linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.02)) !important;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.08), 0 4px 14px rgba(0,0,0,.20);
}

/* -------------------- Agenda Items: Lift + Ripple -------------------- */
.agenda-item{
  background:
    linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,0)),
    var(--glass-surface);
  border:1px solid var(--glass-border-dark);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  transition: transform .18s ease, box-shadow .22s ease, border-color .22s ease;
}
.agenda-item:hover{
  transform: translateY(-1px);
  box-shadow: 0 14px 28px rgba(0,0,0,.26);
  border-color: color-mix(in oklab, var(--accent) 16%, var(--glass-border-dark));
}

/* Ripple (pure CSS) on checkbox click */
.agenda-item input[type="checkbox"]{
  position:relative; overflow:visible;
}
.agenda-item input[type="checkbox"]:active::after{
  content:""; position:absolute; inset:-6px;
  border-radius:999px; pointer-events:none;
  background: radial-gradient(18px 18px at center, color-mix(in oklab, var(--accent) 40%, transparent) 0%, transparent 70%);
  animation: ripple .5s ease;
}
@keyframes ripple{
  from{ transform: scale(.6); opacity:.7; }
  to  { transform: scale(1.4); opacity:0; }
}

/* -------------------- Table: Subtle Row Hover & Sticky Frost Head -------------------- */
.tbl th{
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0)), var(--panel);
  border-bottom:1px solid var(--glass-border-dark);
}
.tbl tbody tr{
  transition: background .18s ease, transform .12s ease;
}
.tbl tbody tr:hover{
  background: linear-gradient(90deg, rgba(124,92,255,.08), rgba(124,92,255,0));
}

/* -------------------- Calendar: Glass Cells + Dot Pop -------------------- */
.cal-cell{
  background:
    linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,0)),
    var(--glass-surface);
  border:1px solid var(--glass-border-dark);
  transition: transform .12s ease, border-color .18s ease, box-shadow .2s ease;
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
}
.cal-cell:hover{
  transform: translateY(-1px);
  border-color: color-mix(in oklab, var(--accent) 22%, var(--glass-border-dark));
  box-shadow: 0 10px 18px rgba(0,0,0,.22);
}
.cal-badge{
  position:relative; isolation:isolate;
}
.cal-badge::before{
  content:""; position:absolute; inset:-2px; border-radius:999px; z-index:-1;
  background: radial-gradient(60% 120% at 50% 0%, rgba(255,255,255,.18), transparent 60%);
}

/* -------------------- Drawers: Glossy Slide + Spring -------------------- */
#calendarDrawer .drawer-panel,
#namesDrawer .drawer-panel{
  background:
    linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,0)),
    var(--panel);
  backdrop-filter: blur(var(--blur-3)) saturate(120%);
  -webkit-backdrop-filter: blur(var(--blur-3)) saturate(120%);
  border-left:1px solid var(--glass-border-dark);
  box-shadow: var(--elev-3);
  transition: transform .36s cubic-bezier(.2, .8, .2, 1), box-shadow .24s ease;
}
#calendarDrawer.open .drawer-panel,
#namesDrawer.open .drawer-panel{
  animation: drawerIn .32s cubic-bezier(.2, .8, .2, 1);
}
@keyframes drawerIn{
  from{ transform: translateX(12%); opacity:.96; }
  to  { transform: translateX(0);   opacity:1; }
}

/* Scrim with softer film grain feel */
#calendarDrawer .drawer-scrim,
#namesDrawer .drawer-scrim{
  background:
    radial-gradient(1200px 700px at 80% -10%, rgba(124,92,255,.26), transparent 60%),
    rgba(0,0,0,.46);
}

/* Pinned drawers keep page usable (already in your CSS) */

/* -------------------- Modals: Glass Pop -------------------- */
.modal{
  background:
    radial-gradient(1200px 700px at 20% -10%, rgba(124,92,255,.18), transparent 60%),
    rgba(0,0,0,.55);
}
.modal .card{
  background:
    linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.00)),
    var(--glass-bg);
  border:1px solid var(--glass-border-dark);
  backdrop-filter: blur(var(--blur-2)) saturate(120%);
  -webkit-backdrop-filter: blur(var(--blur-2)) saturate(120%);
  animation: glassPop .18s ease-out;
}
@keyframes glassPop{
  from{ transform: translateY(10px) scale(.985); opacity:0; }
  to  { transform: translateY(0) scale(1); opacity:1; }
}

/* -------------------- Toaster: Float & Fade -------------------- */
.toast{
  background:
    linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,0)),
   var(--panel);
  border:1px solid var(--glass-border-dark);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  box-shadow: 0 16px 44px rgba(0,0,0,.34);
}
.toast.show{
  animation: toastIn .24s cubic-bezier(.2, .8, .2, 1);
}
@keyframes toastIn{
  from{ transform: translateY(-10px); opacity:.0; }
  to  { transform: translateY(0);    opacity:1; }
}

/* -------------------- Pills & Badges: Gloss Edge -------------------- */
.pill, .badge{
  background:
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0)),
    var(--glass-chip);
  border:1px solid var(--glass-border-dark);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

/* -------------------- Lead Paste Block: Subtle Glow -------------------- */
.lead-block.highlight{
  background:
    linear-gradient(180deg, rgba(124,92,255,.12), rgba(124,92,255,.04)),
    var(--glass-surface);
  border-color: color-mix(in oklab, var(--accent) 46%, var(--glass-border-dark));
  box-shadow: 0 10px 24px rgba(124,92,255,.18);
}

/* -------------------- Side Tabs: Magnetic Hover -------------------- */
#sideTabs .tab{
  transition: transform .16s cubic-bezier(.2,.9,.2,1), box-shadow .22s ease, background .22s ease;
  background:
    linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,0)),
    var(--glass-chip);
  border:1px solid var(--glass-border-dark);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}
#sideTabs .tab:hover{
  transform: translateY(-1px);
  box-shadow: 0 16px 30px rgba(0,0,0,.26);
}

/* -------------------- Calendar Settings & Overrides: Tidy Glass -------------------- */
#calSettings{
  background:
    linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,0)),
    var(--glass-surface);
  border:1px solid var(--glass-border-dark);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

/* -------------------- Micro Interaction: Shimmer on Primary Actions -------------------- */
button.primary::before{
  content:""; position:absolute; inset:0; border-radius:inherit; pointer-events:none;
  background:
    linear-gradient(120deg, transparent 0%, rgba(255,255,255,.16) 30%, transparent 60%);
  transform: translateX(-120%);
  transition: transform .8s ease;
}
button.primary:hover::before{
  transform: translateX(120%);
}

/* -------------------- Motion Preferences -------------------- */
@media (prefers-reduced-motion: reduce){
  .card, button, .agenda-item, .cal-cell, #sideTabs .tab{ transition: none; }
  .toast.show, .modal .card{ animation: none; }
}